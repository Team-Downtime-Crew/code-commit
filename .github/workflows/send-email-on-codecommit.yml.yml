name: Commit Notification

on:
  push:
    branches:
      - main  # Change to your desired branch

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Generate formatted commit notification
        run: |
          echo "====================================================="
          echo "ğŸ“¦  Commit Notification - GitHub Actions"
          echo "====================================================="
          echo "ğŸ” Branch      : $(echo '${{ github.ref }}' | sed 's/refs\/heads\///')"
          echo "ğŸ  Repo URL    : https://github.com/${{ github.repository }}"
          echo "ğŸ”— Commit      : ${{ github.sha }}"
          echo "ğŸ”— Commit URL  : https://github.com/${{ github.repository }}/commit/${{ github.sha }}"
          echo "ğŸ‘¤ Author      : ${{ github.event.head_commit.author.name }} <${{ github.event.head_commit.author.email }}>"
          echo "ğŸ“… Date        : $(date -d '${{ github.event.head_commit.timestamp }}' '+%Y-%m-%d (%a, %d %b %Y)')"
          echo ""
          echo "ğŸ“ Commit Message:"
          echo "-----------------------------------------------------"
          echo "${{ github.event.head_commit.message }}"
          echo "-----------------------------------------------------"
          echo ""

          echo "ğŸ—‚ï¸  Changed Files:"
          echo "-----------------------------------------------------"
          for file in ${{ join(github.event.head_commit.added, ' ') }}; do echo "ğŸŸ¢ Added: $file"; done
          for file in ${{ join(github.event.head_commit.modified, ' ') }}; do echo "ğŸŸ¡ Modified: $file"; done
          for file in ${{ join(github.event.head_commit.removed, ' ') }}; do echo "ğŸ”´ Removed: $file"; done
          echo "====================================================="
